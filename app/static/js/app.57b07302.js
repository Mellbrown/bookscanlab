(function(t){function e(e){for(var s,r,a=e[0],c=e[1],l=e[2],d=0,p=[];d<a.length;d++)r=a[d],i[r]&&p.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},i={app:0},o=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/static/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"08d9":function(t,e,n){"use strict";var s=n("1297"),i=n.n(s);i.a},1297:function(t,e,n){},"265b":function(t,e,n){},3590:function(t,e,n){"use strict";var s=n("3a76"),i=n.n(s);i.a},"3a76":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"navbar navbar-expand-sm navbar-light bg-info"},[n("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("\n      북스캐너 LAB \n      "),n("icon",{staticClass:"ml-1",attrs:{icon:"flask"}})],1),n("ul",{staticClass:"navbar-nav mr-auto"},[n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/makefilter"}},[t._v("필터")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/modify-poly"}},[t._v("폴리 수정")])],1)])],1),n("router-view"),n("div",{staticClass:"bg-dark text-light px-2"},[t._v('\n    selected source : "'+t._s(t.selectedSource)+'"\n  ')])],1)},o=[],r=n("cebc"),a=n("2f62"),c={methods:Object(r["a"])({},Object(a["c"])(["selectSource"])),computed:Object(r["a"])({},Object(a["d"])(["selectedSource"]))},l=c,u=(n("b383"),n("2877")),d=Object(u["a"])(l,i,o,!1,null,"ea958b26",null),p=d.exports,h=n("8c4f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex grow container-fluid"},[n("div",{staticClass:"row grow"},[n("div",{staticClass:"col-md-6 bg-danger flex grow m-1 card"}),n("div",{staticClass:"col-md-3 bg-info flex grow m-1 card"}),n("div",{staticClass:"col-md-3 flex grow m-1 p-0"},[n("filter-inspector")],1)])])},m=[],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex grow bg-secondary card"},[n("div",{staticClass:"border-bottom border-dark p-2 px-3 flex h-left baseline"},[n("div",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){t.isShowSetter=!1}}},[n("icon",{attrs:{icon:"arrow-left"}})],1),n("h5",{staticClass:"m-0 ml-3 p-0 mt-auto mb-1"},[t._v(t._s(t.action_txt))]),n("div",{staticClass:"flex grow h-right"},[n("div",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){t.isShowSetter=!0}}},[n("icon",{attrs:{icon:"plus"}})],1)])]),n("div",{staticClass:"p-2 px-3 flex grow"},[t.isShowSetter?n("filter-setter"):n("div",[t._v("\n      asdf\n    ")])],1)])},g=[],b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex grow"},[n("div",{staticClass:"flex grow y-scroll"},[n("filter-cell",{ref:"src",attrs:{title:"#1. src",description:"원본이미지입니다.",visible:t.output.src,property:{width:1e4,height:1e4}},on:{"toggle-visible":function(e){t.output.src=!t.output.src}}}),n("filter-cell",{attrs:{title:"#3. gray",description:"이미지를 그레이 스케일로 변환합니다.",visible:t.output.gray},on:{"toggle-visible":function(e){t.output.gray=!t.output.gray}}}),n("filter-cell",{attrs:{title:"#5. cany",description:"윤곽선을 검출시킵니다.",visible:t.output.cany},on:{"toggle-visible":function(e){t.output.cany=!t.output.cany}}}),n("filter-cell",{attrs:{title:"#7. contours",description:"마지막으로 콘트라를 따옵니다.",visible:t.output.contours},on:{"toggle-visible":function(e){t.output.contours=!t.output.contours}}})],1),t._m(0)])},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex h-right"},[n("button",{staticClass:"btn btn-primary"},[t._v("Apply")])])}],y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toggle bg-primary",on:{click:function(e){return t.$emit("click")}}},[n("small",{staticClass:"mr-1"},[t._v(t._s(t.label))]),t.on?n("icon",{attrs:{icon:"toggle-on",size:"lg"}}):n("icon",{attrs:{icon:"toggle-off",size:"lg"}})],1)},x=[],C={props:["on","label"]},_=C,k=(n("08d9"),Object(u["a"])(_,y,x,!1,null,"1dd3f950",null)),S=k.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cell",attrs:{tabindex:"0"}},[n("div",{staticClass:"flex h-left"},[n("h6",[t._v(t._s(t.title))]),n("div",{staticClass:"flex h-right grow"},[n("toggle",{attrs:{label:t.visible?"visible":"invisible",on:t.visible},on:{click:function(e){return t.$emit("toggle-visible")}}})],1)]),n("small",[t._v(t._s(t.description))]),n("div",{staticClass:"flex h-right px-2 py-1"},[n("div",{staticClass:"flex"},t._l(t.property,function(e,s){return n("small",{key:s,staticClass:"block bg-secondary rounded px-2 mb-1"},[t._v(t._s(s)+": "+t._s(e))])}),0)])])},O=[],E={props:{title:{type:String,required:!0},description:{type:String,default:""},visible:{type:Boolean,default:!1},property:{type:Object,default:void 0}},components:{Toggle:S}},P=E,B=(n("7dcb"),Object(u["a"])(P,j,O,!1,null,"f0aed3fe",null)),$=B.exports,L={data:function(){return{list:{preblur:[],postblur:[],mono:[]},output:{src:!1,gray:!1,cany:!1,contours:!1}}},mounted:function(){},components:{Toggle:S,FilterCell:$}},H=L,T=Object(u["a"])(H,b,w,!1,null,null,null),Y=T.exports,D={data:function(){return{action_txt:"Root",isShowSetter:!1}},methods:{},mounted:function(){},components:{FilterSetter:Y}},M=D,X=Object(u["a"])(M,v,g,!1,null,null,null),z=X.exports,A={components:{FilterInspector:z}},F=A,N=Object(u["a"])(F,f,m,!1,null,null,null),W=N.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex grow"},[n("div",{staticClass:"flex bg-secondary p-1 px-3 text-light h-right"},[n("div",{staticClass:"btn btn-primary btn-sm p-0 px-1",on:{click:t.syncListSource}},[n("icon",{attrs:{icon:"sync-alt"}})],1),n("div",{staticClass:"grow",on:{click:t.changeServer}},[n("icon",{attrs:{icon:"server"}}),t._v("\n      "+t._s(""===t.rHost?"http://built-in":t.rHost)+"\n    ")],1)]),n("h3",{staticClass:"m-3 mb-0"},[n("icon",{attrs:{icon:"folder"}}),t._v("\n    / 이미지 소스\n  ")],1),n("div",{staticClass:"border border-dark  mx-3"}),n("div",{staticClass:"flex grow y-scroll",on:{dropover:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},drop:t.drop}},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},t._l(t.source,function(e){return n("div",{key:e,staticClass:"col-sm-3 p-0 py-3"},[n("image-card",{attrs:{src:t.rHost+"/static/source/"+e}})],1)}),0)])])])},I=[],J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card m-1 point",on:{click:function(e){return t.selectSource(t.src)}}},[n("img",{staticClass:"card-img-top",attrs:{src:t.src}}),n("div",{staticClass:"card-body bg-secondary p-2 text-light"},[n("small",{staticClass:"card-text"},[t._v(t._s(t.src))])])])},R=[],K={props:["src"],methods:Object(r["a"])({},Object(a["c"])(["selectSource"]))},V=K,G=Object(u["a"])(V,J,R,!1,null,null,null),Q=G.exports,U={mounted:function(){window.addEventListener("keypress",this.onwindowkeypress)},beforeDestroy:function(){window.removeEventListener("keypress",this.onwindowkeypress)},methods:Object(r["a"])({onwindowkeypress:function(t){switch(t.key){case"r":this.syncListSource();break}},changeServer:function(){var t=prompt("api 서버 주소를 입력");this.setServer(t)},drop:function(t){t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.files;console.log(e)}},Object(a["c"])(["setServer"]),Object(a["b"])(["syncListSource"])),computed:Object(r["a"])({},Object(a["d"])(["rHost","source"])),components:{ImageCard:Q}},Z=U,tt=Object(u["a"])(Z,q,I,!1,null,null,null),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fliud flex grow h-left"},[n("div",{staticClass:"col-md-6 bg-secondary flex grow p-0"},[t.selectedSource?n("image-viewer",{attrs:{src:t.selectedSource,pointover:t.pointover},on:{"points-changed":t.pointsChanged}}):t._e()],1),n("div",{staticClass:"col-md-3 flex grow"},[n("h3",{staticClass:"mt-1 bg-primary p-1 px-2 text-light rounded"},[t._v("poly points")]),n("div",{staticClass:"border"}),n("div",{staticClass:"flex grow card m-1 p-1 y-scroll"},t._l(t.childPoints,function(e,s){return n("div",{key:s,staticClass:"m-1 p-1 px-2 bg-secondary rounded flex h-left text-light clpoint",on:{mouseenter:function(e){t.pointover=s},mouseleave:function(e){t.pointover=-1}}},[n("div",{staticClass:"mr-2"},[t._v(t._s(s)+" | ")]),n("div",{staticClass:"grow mr-1"},[t._v("x: "+t._s(e.x))]),n("div",{staticClass:"grow"},[t._v("y: "+t._s(e.y))])])}),0),n("div",{staticClass:"flex grow relative m-3"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.jsonPoint,expression:"jsonPoint"}],staticClass:"frame",domProps:{value:t.jsonPoint},on:{input:function(e){e.target.composing||(t.jsonPoint=e.target.value)}}})])]),t._m(0)])},st=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-md-3"},[n("h3",{staticClass:"mt-1 bg-primary p-1 px-2 text-light rounded"},[t._v("3D Paper")])])}],it=n("f499"),ot=n.n(it),rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex grow"},[n("div",{staticClass:"flex"},[n("div",{staticClass:"p-1 px-3 bg-dark flex"},[n("div",{staticClass:"mx-auto"},[n("button",{staticClass:"btn btn-primary mx-1",on:{click:function(e){t.rotate-=90}}},[n("icon",{attrs:{icon:"undo-alt"}})],1),n("button",{staticClass:"btn btn-primary mx-1",on:{click:function(e){t.rotate+=90}}},[n("icon",{attrs:{icon:"redo-alt"}})],1),n("div",{staticClass:"btn-group ml-3",attrs:{role:"group"}},[n("button",{class:t.buttonSelected[0],attrs:{type:"button"},on:{click:function(e){t.selectedButton=0}}},[n("icon",{attrs:{icon:"draw-polygon"}})],1),n("button",{class:t.buttonSelected[1],attrs:{type:"button"},on:{click:function(e){t.selectedButton=1}}},[n("icon",{attrs:{icon:"plus"}})],1),n("button",{class:t.buttonSelected[2],attrs:{type:"button"},on:{click:function(e){t.selectedButton=2}}},[n("icon",{attrs:{icon:"fist-raised"}})],1),n("button",{class:t.buttonSelected[3],attrs:{type:"button"},on:{click:function(e){t.selectedButton=3}}},[n("icon",{attrs:{icon:"minus"}})],1)])])])]),n("div",{ref:"con",staticClass:"flex grow relative",staticStyle:{overflow:"hidden"},on:{mousewheel:t.mousewheel,mousedown:t.mousedown}},[t.src?n("div",{style:t.imgStyle,on:{click:function(e){return e.ctrlKey?t.pick(e):null}}},[n("img",{ref:"img",staticClass:"frame",attrs:{src:t.src,draggable:"false"}}),n("paper3d",{attrs:{height:t.height,width:t.width}}),n("svg",{staticClass:"frame",attrs:{viewBox:t.viewBox,xmlns:"http://www.w3.org/2000/svg"}},[n("polygon",{attrs:{points:t.txtPoints,stroke:"green",fill:"transparent","stroke-width":"3"}})]),n("div",{staticClass:"frame"},t._l(t.points,function(e,s){return n("div",{key:s,staticClass:"handle",style:{left:e.x/t.scale+"px",top:e.y/t.scale+"px",border:s===t.pointover?"solid 4px green":""},on:{click:function(e){return t.handleclick(e,s)},mousedown:function(e){return e.preventDefault(),e.stopPropagation(),t.handledrag(e,s)}}},[n("div",{staticClass:"midcen border border-danger",staticStyle:{height:"5px",width:"5px","border-width":"5pt"}})])}),0)],1):t._e()])])},at=[],ct=n("e814"),lt=n.n(ct),ut=(n("c5f6"),n("2ef0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"frame",staticClass:"frame"})}),dt=[],pt=n("5a89"),ht={props:{height:{type:Number,default:function(){return 100}},width:{type:Number,default:function(){return 100}}},data:function(){return{camera:null,scene:null,renderer:null,geometry:null,material:null,mesh:null}},mounted:function(){this.init(),this.animate()},methods:{init:function(){this.camera=new pt["c"](70,this.width/this.height,.01,10),this.camera.position.z=1,this.scene=new pt["d"],this.geometry=new pt["e"](.2),this.material=new pt["b"],this.mesh=new pt["a"](this.geometry,this.material),this.scene.add(this.mesh),this.renderer=new pt["f"]({alpha:!0}),this.renderer.setSize(this.width,this.height),this.$refs.frame.appendChild(this.renderer.domElement)},animate:function(){requestAnimationFrame(this.animate),this.mesh.rotation.x+=.01,this.mesh.rotation.y+=.02,this.renderer.render(this.scene,this.camera)}},watch:{width:function(){this.renderer.setSize(this.width,this.height)}}},ft=ht,mt=Object(u["a"])(ft,ut,dt,!1,null,null,null),vt=mt.exports,gt={props:{src:{type:String,required:!0},init:{type:Array,default:function(){return[]}},pointover:{type:Number,default:function(){return-1}}},data:function(){return{width:100,rotate:0,ratio:1,drag:!1,mouseprex:0,mouseprey:0,mousex:0,mousey:0,left:0,top:0,viewBox:"",points:[],naturalWidth:0,naturalHeight:0,selectedButton:0,toppadd:0,handledragging:null}},mounted:function(){var t=this,e=this;this.$nextTick(function(){var n=e.$refs.img.naturalWidth,s=e.$refs.img.naturalHeight;e.toppadd=e.$refs.con.getBoundingClientRect().top,e.width=n,e.ratio=s/n,e.naturalWidth=n,e.naturalHeight=s,e.viewBox="0 0 ".concat(n," ").concat(s),window.addEventListener("keypress",t.onwindowkeypress),e.points=e.init})},beforeDestroy:function(){window.removeEventListener("keypress",this.onwindowkeypress)},methods:{mouse2imgScale:function(t,e){return t-=this.left,e-=this.top+this.toppadd,{x:t*this.scale,y:e*this.scale}},handledrag:function(t,e){2===this.selectedButton?(this.handledragging=Object(r["a"])({target:e},this.mouse2imgScale(t.clientX,t.clientY)),window.addEventListener("mousemove",this.handlemove),window.addEventListener("mouseup",this.handleup)):1===this.selectedButton&&(this.points.splice(e,0,Object(r["a"])({},this.points[e])),this.points=this.points.filter(function(){return!0}),this.handledragging=Object(r["a"])({target:e},this.mouse2imgScale(t.clientX,t.clientY)),window.addEventListener("mousemove",this.handlemove),window.addEventListener("mouseup",this.handleup))},handlemove:function(t){this.handledragging=Object(r["a"])({},this.handledragging,this.mouse2imgScale(t.clientX,t.clientY))},handleup:function(t){window.removeEventListener("mousemove",this.handlemove),window.removeEventListener("mouseup",this.handleup),this.points[this.handledragging.target]={x:this.handledragging.x,y:this.handledragging.y},this.handledragging=null,this.points=this.points.filter(function(){return!0}),console.log("end")},handleclick:function(t,e){3===this.selectedButton&&(console.log(e+"delete"),this.points=this.points.filter(function(t,n){if(n!==e)return!0}))},pick:function(t){var e=t.clientX,n=t.clientY;function s(t,s){var i=e,o=n;return Math.pow(t-i,2)+Math.pow(s-o,2)}if(e-=this.left,n-=this.top+this.toppadd,e*=this.scale,n*=this.scale,e=lt()(e),n=lt()(n),0!==this.points.length){for(var i={target:0,dist:s(this.points[0].x,this.points[0].y)},o=1;this.points.length>o;o++){var r=s(this.points[0].x,this.points[0].y);i.dist>r&&(i={target:o,dist:r})}var a=i.target-1<0?this.points.length-1:i.target-1,c=i.target+1<this.points.length?i.target+1:0,l=s(this.points[a].x,this.points[a].y),u=s(this.points[c].x,this.points[c].y);this.points.splice(l<u?i.target:i.target+1,0,{x:e,y:n}),this.points=this.points.filter(function(){return!0})}else this.points=[{x:e,y:n}]},mousewheel:function(t){this.width-=1.5*t.deltaY},onwindowkeypress:function(t){switch(t.keyCode){case 113:this.selectedButton=0;break;case 119:this.selectedButton=1;break;case 101:this.selectedButton=2;break;case 114:this.selectedButton=3;break}},mousedown:function(t){window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup),this.mouseprex=t.clientX,this.mouseprey=t.clientY},mouseup:function(t){window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup),this.mouseprex=0,this.mouseprey=0,this.left+=this.mousex,this.top+=this.mousey,this.mousex=0,this.mousey=0},mousemove:function(t){this.mousex=t.clientX-this.mouseprex,this.mousey=t.clientY-this.mouseprey}},watch:{points:function(){this.$emit("points-changed",this.points)}},computed:{scale:function(){return this.naturalWidth/this.width},buttonSelected:function(){return[["btn",0!==this.selectedButton?"btn-secondary":"btn-light"],["btn",1!==this.selectedButton?"btn-secondary":"btn-light"],["btn",2!==this.selectedButton?"btn-secondary":"btn-light"],["btn",3!==this.selectedButton?"btn-secondary":"btn-light"]]},imgStyle:function(){return{position:"absolute",display:"inline-block",height:"".concat(this.height,"px"),width:"".concat(this.width,"px"),filter:"drop-shadow(0px 10px 5px rgba(0,0,0,0.5));",transform:"translate(".concat(this.left+this.mousex,"px, ").concat(this.top+this.mousey,"px) rotate(").concat(this.rotate,"deg)")}},height:function(){return this.width*this.ratio},txtPoints:function(){var t=this.handledragging;return this.points.map(function(e,n){return null!==t&&t.target===n?t.x+","+t.y:e.x+","+e.y}).join(" ")}},components:{paper3d:vt}},bt=gt,wt=(n("3590"),Object(u["a"])(bt,rt,at,!1,null,"6d1ed3ee",null)),yt=wt.exports,xt={data:function(){return{childPoints:[],pointover:-1,jsonPoint:""}},computed:Object(r["a"])({},Object(a["d"])(["selectedSource"])),methods:{pointsChanged:function(t){this.childPoints=t}},watch:{childPoints:function(){this.jsonPoint=ot()(this.childPoints)}},components:{ImageViewer:yt}},Ct=xt,_t=(n("bd3d"),Object(u["a"])(Ct,nt,st,!1,null,"738c3c18",null)),kt=_t.exports;s["a"].use(h["a"]);var St=new h["a"]({routes:[{path:"/",component:et},{path:"/makefilter",component:W},{path:"/modify-poly",component:kt}]}),jt=n("bc3a"),Ot=n.n(jt);s["a"].use(a["a"]);var Et=new a["a"].Store({state:{rHost:"http://172.17.0.2",source:[],selectedSource:null},mutations:{setServer:function(t,e){t.rHost=e},setSource:function(t,e){t.source=e},selectSource:function(t,e){t.selectedSource=e}},getters:{},actions:{syncListSource:function(t){var e=t.state,n=t.commit;return Ot.a.get("".concat(e.rHost,"/list-source")).then(function(t){n("setSource",t.data)})}}}),Pt=(n("4989"),n("ab8b"),n("ecee")),Bt=n("c074"),$t=n("ad3d"),Lt=n("6944"),Ht=n.n(Lt);n("bddf");Pt["c"].add(Bt["a"]),s["a"].component("icon",$t["a"]),s["a"].use(Ht.a),s["a"].config.productionTip=!1,new s["a"]({router:St,store:Et,render:function(t){return t(p)}}).$mount("#app")},"5f59":function(t,e,n){},"7dcb":function(t,e,n){"use strict";var s=n("265b"),i=n.n(s);i.a},b383:function(t,e,n){"use strict";var s=n("5f59"),i=n.n(s);i.a},bd3d:function(t,e,n){"use strict";var s=n("fb77"),i=n.n(s);i.a},bddf:function(t,e,n){},fb77:function(t,e,n){}});
//# sourceMappingURL=app.57b07302.js.map